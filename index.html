<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Mikael Jergefelt">
    <meta name="description" content="Accessible dropdowns for menus, select boxes and menu buttons that just work no matter if it's mouseover, keyboard navigation, screen reader or mobile. Bootstrap _not required_.">

    <title>Better Bootstrap Dropdowns</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="dist/bbdropdowns.min.css">
    <link rel="stylesheet" href="css/demosite.css">
  </head>

  <body class="no-js">

    <nav class="navbar navbar-light navbar-expand-md bg-light fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">BbDropdowns.js <span class="flash"></span></a>
        <ul class="nav mr-auto bb-dropdowns">
          <li class="nav-item">
            <a class="nav-link text-dark" href="#">Documentation</a>
            <ul>
              <li>
                <a href="#introduction">Introduction</a>
              </li>
              <li>
                <a href="#menu">Dropdown menu</a>
              </li>
              <li>
                <a href="#select">Select box</a>
              </li>
              <li>
                <a href="#button">Menu button</a>
              </li>
              <li>
                <a href="#misc">Miscellaneous</a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link text-dark" href="#">Start using</a>
            <ul>
              <li>
                <a href="https://github.com/dermike/better-bootstrap-dropdowns">Download code</a>
              </li>
              <li>
                <a href="https://github.com/dermike/better-bootstrap-dropdowns/issues">Issues</a>
              </li>
              <li>
                <a href="https://github.com/dermike/better-bootstrap-dropdowns/pulls">Pull requests</a>
              </li>
              <li>
                <a href="https://github.com/dermike/better-bootstrap-dropdowns/commits/master">Commits</a>
              </li>
              <li>
                <a href="https://github.com/dermike/better-bootstrap-dropdowns/releases">Releases</a>
              </li>
              <li>
                <a href="https://github.com/dermike/better-bootstrap-dropdowns/graph/contributors">Contributors</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="col">
            <section class="jumbotron">
            <h1>Better <span class="flash"></span> <span class="font-weight-normal font-italic">Bootstrap</span> <span class="flash"></span> <span class="font-weight-normal">Dropdowns</span> <span class="flash"></span></h1>
            <p class="lead">Accessible dropdowns for menus, select boxes and menu buttons that <i>just work</i> no matter if it's mouseover, keyboard navigation, screen reader or mobile. Try the <a href="#menu" aria-label="Menu documentation">menus</a> above and the <a href="#select" aria-label="Select box documentation">select boxes</a> and <a href="#button" aria-label="Dropdown button documentation">buttons</a> below. &#x1F447;</p>
          </section>
          <div class="admin-bar">
            <ul class="bb-dropdowns">
              <li>
                <a href="#" class="btn btn-lg btn-danger" data-select="true" id="category-select">Choose category</a>
                <ul>
                  <li>
                    <a href="#" data-value="food">Food</a>
                  </li>
                  <li>
                    <a href="#" data-value="emojis" aria-checked="true">Emojis</a>
                  </li>
                  <li>
                    <a href="#" data-value="animals">Animals</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="#" class="btn btn-lg btn-primary" data-select="true" id="favorite-select">Choose favorite</a>
                <ul>
                  <li>
                    <a href="#" data-value="&#x1F60E;">&#x1F60E;</a>
                  </li>
                  <li>
                    <a href="#" data-value="&#x1F4A9;">&#x1F4A9;</a>
                  </li>
                  <li>
                    <a href="#" data-value="&#x1F525;">&#x1F525;</a>
                  </li>
                  <li>
                    <a href="#" data-value="&#x1F383;">&#x1F383;</a>
                  </li>
                  <li>
                    <a href="#" data-value="&#x1F914;">&#x1F914;</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="#" class="btn btn-lg btn-info" data-clickonly="true">About the author</a>
                <ul>
                  <li>
                    <a href="https://twitter.com/dermike">Twitter</a>
                  </li>
                  <li>
                    <a href="https://librarian.codes">Website</a>
                  </li>
                  <li>
                    <a href="https://www.researchgate.net/profile/Mikael_Jergefelt">ResearchGate profile</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="row" style="margin-top: 1.5em; margin-bottom: 3em;">
        <div class="col-lg-8 ml-auto mr-auto">
          <h2 id="introduction">Introduction</h2>
          <p>If you're like me you're probably a little tired of the default <a href="http://getbootstrap.com">Bootstrap</a> look that your amazing back-end developer colleagues like to use thick and fast &#x1F44B;. I've come to a point in my life where I needed to spice it up a little &#x1F389;, so I made these dropdowns for them, but also for you...</p>
          <p>It's not perfect code in any way, but works for me, and I've focused to make it as accessible as I can. Should work just as well for mouse/hover, touch, keyboard and screen reader use... and actually without Bootstrap as well &#x1F631;. I want to learn and get better though, so please let me know (via <a href="https://github.com/dermike/better-bootstrap-dropdowns/issues">GitHub issues</a> e.g.) if you disagree with something.</p>
          <p>Before we get started I just want to clarify that "better" in this case means better for me, not necessarily for you... let's go! &#x1F697;</p>

          <h2 id="menu">Dropdown menu</h2>
          <p>After you've included <a href="https://github.com/dermike/better-bootstrap-dropdowns/tree/master/js">bbdropdowns.js</a> and <a href="https://github.com/dermike/better-bootstrap-dropdowns/tree/master/css">bbdropdowns.css</a> in your project, the script expects the following markup when using a dropdown menu, e.g. in your navbar:</p>
          <pre><code>&lt;ul class="navbar-nav mr-auto bb-dropdowns"&gt;
  &lt;li class="nav-item"&gt;
    &lt;a href="#" class="nav-link"&gt;Menu one&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;a href="/link-1"&gt;Dropdown 1&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="/link-2"&gt;Dropdown 2&lt;/a&gt;
      &lt;/li&gt;
      &lt;!-- ... more dropdown items --&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;!-- ... more menu items --&gt;
&lt;/ul&gt;</code></pre>
          <p>Put a <code>.bb-dropdowns</code> class on a <code>ul</code> and then the submenu dropdown list next to the <code>a</code> link in each <code>li</code></p>
          <p>To make it into the actual dropdowns, you need to initialize the script like this:</p>
          <pre><code class="js">var dropdowns = new BbDropdowns();
dropdowns.init();</code></pre>
          <p>After that's done the markup has been touched up a little to use the needed CSS and to support screen readers and keyboard navigation. Users can now navigate by tabbing to each menu, open it with ENTER, SPACE or &#x2B07;. Once in the submenu, it supports ESC to close, &#x2B07; and &#x2B06; to navigate. &#x2B05; and &#x27A1; close the menu and goes to the next one if there is one available.</p>
          <p>Add <code>data-clickonly="true"</code> to the menu item link disable hover and require click or tap to toggle the menu.</p>

          <h2 id="select">Select box</h2>
          <p>The following code example creates a select box after running <code>.init()</code>. Add <code>data-select="true"</code> to the first level link. The link text will act as a label for the select box. If any option should be pre-selected, put <code>aria-checked="true"</code> on that item.</p>
          <pre><code class="html">&lt;ul class="bb-dropdowns"&gt;
  &lt;li&gt;
    &lt;a href="#" class="btn btn-danger" data-select="true"&gt;Select something&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;a href="#" data-value="value 1"&gt;Optione one&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="#" data-value="value 2"&gt;Option two&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>
          <p>Select boxes will emit a <code>change</code> event when the user selects a new value. You can subscribe to changes like you normally would with a select box:</p>
          <pre><code class="js">document.getElemenyById('my-select').addEventListener('change', function() {
  console.log('The value is: ' + e.target.getAttribute('data-value'));
});</code></pre>
          <pre><code class="js">$('#my-select').change(function(e) {
  console.log('The value is: ' + e.target.getAttribute('data-value'));
});</code></pre>
          <p><b>Note</b> that you need to use <code>getAttribute('data-value')</code> and not <code>.value</code>. See how the first and second select box in the initial examples work together.</p>

          <h2 id="button">Menu button</h2>
          <p>Combining some markup and attributes from the previous two use cases of <a href="https://github.com/dermike/better-bootstrap-dropdowns/tree/master/js">bbdropdowns.js</a> you can easily create a menu button (or a group of buttons) opening a dropdown of links like the third button in the examples up top. The <code>data-clickonly="true"</code> attribute ensures it only opens by clicking, tapping or keypressing it.</p>
          <pre><code class="html">&lt;ul class="bb-dropdowns"&gt;
  &lt;li&gt;
    &lt;a href="#" class="btn btn-info" data-clickonly="true"&gt;Select something&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;a href="/link-1"&gt;Link one&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="/link-2"&gt;Link two&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>

          <h2 id="misc">Miscellaneous</h2>
          <h4>Adding dynamically</h3>
          <p>If you want to add dropdowns in any form like above dynamically after the page has loaded, just insert the same markup anywhere and run the <code>.init()</code> function again to initialize any new dropdowns.</p>
          <h4>Updating dynamically</h4>
          <p>Select boxes can have it's dropdown items updated any time without having to run <code>.init()</code>.</p>
          <pre><code>var selectbox = document.querySelector('#my-select + ul');
selectbox.innerHTML('&lt;li&gt;&lt;a href="#" data-value="example"&gt;Example option&lt;/a&gt;&lt;/li&gt;');</code></pre>
          <p><b>Note</b> that you can currently only change the inside options of the <code>ul</code> like this. If you need to change the main select button, remove and create a new one like above, along with any eventlisteners.</p>
        </div>
      </div>
    </div>
    <div class="overlay">
      <div class="message bot" aria-live="polite"></div>
    </div>
    
    <script src="dist/bbdropdowns.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
      var bbdropdowns = new BbDropdowns();
      bbdropdowns.init();

      var emojiOptions = document.querySelector('#favorite-select + ul').innerHTML;
      var foodOptions = '<li><a href="#" data-value="pancakes">Pancakes</a></li><li><a href="#" data-value="pizza">Pizza</a></li><li><a href="#" data-value="hamburgers">Hamburgers</a></li><li><a href="#" data-value="fish">Fish</a></li>';
      var animalOptions = '<li><a href="#" data-value="cats">Cats</a></li><li><a href="#" data-value="dogs">Dogs</a></li><li><a href="#" data-value="horses">Horses</a></li><li><a href="#" data-value="rabbits">Rabbits</a></li><li><a href="#" data-value="pigs">Pigs</a></li>';

      document.querySelector('#category-select').addEventListener('change', function(e) {
        var value = e.target.getAttribute('data-value'),
          favorites = document.querySelector('#favorite-select + ul');
        if (value === 'food') {
          favorites.innerHTML = foodOptions;
        } else if (value === 'emojis') {
          favorites.innerHTML = emojiOptions;
        } else if (value === 'animals') {
          favorites.innerHTML = animalOptions;
        }
      });

      document.querySelector('#favorite-select').addEventListener('change', function(e) {
        var value = e.target.getAttribute('data-value'),
          overlay = document.querySelector('.overlay'),
          message = document.querySelector('.message'),
          randomStart = ['Wow!', 'Cool! &#x1F60E;', 'Awesome!', 'Super!', 'High five! &#x270B;'],
          randomEnd = ['I love', 'I like', 'I prefer', 'I enjoy'];
        overlay.style.visibility = 'visible';
        message.innerHTML = '<p>' + randomStart[Math.floor(Math.random() * randomStart.length)] + ' ' + randomEnd[Math.floor(Math.random() * randomEnd.length)] + ' ' + value + ' too!</p>';
        // Display and hide immediately to avoid flicker
        message.style.display = 'block';
        message.style.display = 'none';
        setTimeout(function() {
          message.style.display = 'block';
          setTimeout(function() {
            overlay.style.visibility = 'hidden';
            message.style.display = 'none';
          }, 2500)
        }, 100);
      });
    </script>
  </body>
</html>